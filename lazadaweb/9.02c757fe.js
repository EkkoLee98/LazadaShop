(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{647:function(e,t,s){"use strict";s.r(t);var i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header1"},[t("div",{staticClass:"logo"},[t("img",{staticStyle:{width:"100px",height:"100px","margin-left":"10px"},attrs:{src:s(648)}}),this._v(" "),t("div",{staticStyle:{color:"darkslategray","font-size":"20px","font-weight":"bold"}},[this._v("siushare.com")])]),this._v(" "),t("div",{staticClass:"title"},[t("span",[t("p",{staticStyle:{"font-size":"25px","font-family":"'Apple Color Emoji'",position:"absolute","margin-left":"-30px","margin-top":"75px"}},[this._v("欢迎登录")])])])])}],a={data:function(){return{show:!0,count:"",timer:null,errors:"",error:!1,param:{mobile:"",smsCode:""},rules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}],smsCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},methods:{goLogin(){this.$router.push("/login")},submitForm(){this.$refs.login.validate(e=>{if(!e)return this.$message.error("请输入手机号和验证码"),console.log("error submit!!"),!1;this.$axios.post(this.$api.loginsms,this.$qs.stringify(this.param),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{null!==e.data&&(console.log(e),console.log(JSON.parse(e.data.msg)),console.log(JSON.parse(e.data.msg).name),console.log(JSON.parse(e.data.msg).role),1==JSON.parse(e.data.msg).role?(localStorage.setItem("ms_username",JSON.parse(e.data.msg).name),localStorage.setItem("identity",JSON.parse(e.data.msg).role),console.log("消费者"),sessionStorage.setItem("role","消费者"),this.$message.success("登录成功")):2==JSON.parse(e.data.msg).role?(localStorage.setItem("ms_username",JSON.parse(e.data.msg).name),localStorage.setItem("identity",JSON.parse(e.data.msg).role),console.log("商家"),sessionStorage.setItem("role","商家"),this.$message.success("登录成功")):3==JSON.parse(e.data.msg).role&&(localStorage.setItem("ms_username",JSON.parse(e.data.msg).name),localStorage.setItem("identity",JSON.parse(e.data.msg).role),console.log("分享者"),sessionStorage.setItem("role","分享者"),this.$message.success("登录成功"))),this.$router.replace("/")})})},getCode(){let e=this.param.mobile;if(e)if(/^1[345678]\d{9}$/.test(e)){this.$axios.get(this.$api.loginsms,{params:{mobile:e},timeout:5e3,retry:5,retryDelay:1e3}).then(e=>{console.log(e.data),console.log("aaa")});const t=60;this.error=!1,this.timer||(this.count=t,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=t?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))}else this.error=!0,this.errors="请输入正确的手机号";else this.error=!0,this.errors="手机号码不能为空"}},mounted(){}},o=(s(735),s(64)),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),s("div",{attrs:{id:"login-wrap"}},[s("div",{staticClass:"ms-login"},[s("div",{staticClass:"ms-title",staticStyle:{color:"black"}},[e._v("手机登录")]),e._v(" "),s("el-form",{ref:"login",staticClass:"ms-content",attrs:{model:e.param,rules:e.rules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"phone"}},[s("i",{staticClass:"el-icon-lx-people",staticStyle:{display:"inline-block"}}),e._v(" "),s("el-input",{staticStyle:{display:"inline-block",width:"270px"},attrs:{placeholder:"输入你的手机号"},model:{value:e.param.mobile,callback:function(t){e.$set(e.param,"mobile",t)},expression:"param.mobile"}})],1),e._v(" "),s("el-form-item",{staticStyle:{display:"inline-block",width:"190px"},attrs:{prop:"code"}},[s("i",{staticClass:"el-icon-lx-lock",staticStyle:{display:"inline-block"}}),e._v(" "),s("el-input",{staticStyle:{display:"inline-block",width:"170px"},attrs:{placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}},model:{value:e.param.smsCode,callback:function(t){e.$set(e.param,"smsCode",t)},expression:"param.smsCode"}})],1),e._v(" "),s("el-form-item",{staticStyle:{display:"inline-block"}},[e.show?s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.getCode()}}},[e._v("获取验证码")]):s("el-button",{attrs:{type:"primary",plain:"",size:"mini",disabled:""},on:{click:function(t){return e.getCode()}}},[e._v("获取验证码")])],1),e._v(" "),e.error?s("div",{staticStyle:{color:"red","font-size":"10px","margin-left":"180px","margin-top":"-15px"}},[e._v(e._s(e.errors))]):e._e(),e._v(" "),e.show?e._e():s("div",{staticStyle:{color:"#5daf34","font-size":"10px","margin-left":"130px","margin-top":"-15px"}},[e._v("短信已发送，"+e._s(e.count)+"s后重新发送")]),e._v(" "),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("登录")])],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-top":"-20px"}},[s("el-link",{staticStyle:{display:"inline-block","margin-top":"5px",color:"#222222"},attrs:{type:"info"},on:{click:function(t){return e.goLogin()}}},[e._v("账密登录\n                    ")]),e._v(" "),s("div",{staticStyle:{display:"inline-block","margin-left":"130px"}},[s("el-switch",{staticStyle:{display:"inline-block"},model:{value:e.param.rememberMe,callback:function(t){e.$set(e.param,"rememberMe",t)},expression:"param.rememberMe"}}),e._v(" "),s("p",{staticStyle:{display:"inline-block"}},[e._v("记住我")])],1)],1)],1)],1)]),e._v(" "),s("div",{staticStyle:{"text-align":"center","margin-top":"15px","font-size":"20px"}},[s("el-link",{attrs:{type:"primary",href:"/"}},[e._v("关于我们")]),e._v("  |  "),s("el-link",{attrs:{type:"primary",href:"/"}},[e._v("联系我们")]),e._v("  |  "),s("el-link",{attrs:{type:"primary",href:"/"}},[e._v("广告服务")])],1),e._v(" "),s("div",{staticStyle:{"text-align":"center","margin-top":"15px","font-size":"15px"}},[e._v("Copyright @ 2019-2020 siushare.com 版权所有")])])}),i,!1,null,"23be93b8",null);t.default=r.exports},648:function(e,t,s){e.exports=s.p+"assets/images/logo.png"},679:function(e,t,s){var i=s(736);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,s(158).default)("3e029f35",i,!0,{})},735:function(e,t,s){"use strict";var i=s(679);s.n(i).a},736:function(e,t,s){}}]);