{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{825:function(e,t,r){var s=r(837);\"string\"==typeof s&&(s=[[e.i,s,\"\"]]),s.locals&&(e.exports=s.locals);(0,r(13).default)(\"0ecc48e6\",s,!0,{})},826:function(e,t,r){var s=r(839);\"string\"==typeof s&&(s=[[e.i,s,\"\"]]),s.locals&&(e.exports=s.locals);(0,r(13).default)(\"61efd641\",s,!0,{})},827:function(e,t,r){var s=r(841);\"string\"==typeof s&&(s=[[e.i,s,\"\"]]),s.locals&&(e.exports=s.locals);(0,r(13).default)(\"87c08c34\",s,!0,{})},836:function(e,t,r){\"use strict\";var s=r(825);r.n(s).a},837:function(e,t,r){},838:function(e,t,r){\"use strict\";var s=r(826);r.n(s).a},839:function(e,t,r){},840:function(e,t,r){\"use strict\";var s=r(827);r.n(s).a},841:function(e,t,r){},843:function(e,t,r){\"use strict\";r.r(t);var s={data:function(){return{identifyCodes:\"1234567890\",identifyCode:\"\",param:{username:\"\",password:\"\",validate:\"\"},rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"}],validate:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]}}},methods:{submitForm(){this.param.validate===this.identifyCode?this.$refs.login.validate(e=>{if(!e)return this.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;localStorage.setItem(\"ms_username\",this.param.username),this.$axios.post(\"/api/login\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{console.log(e),null!=e&&(1===e.data.msg?(localStorage.setItem(\"identity\",e.data.msg),console.log(\"普通用户\"),this.$router.go(-1)):2===e.data.msg?(localStorage.setItem(\"identity\",e.data.msg),console.log(\"商家\"),this.$router.push(\"/\")):3===e.data.msg?(localStorage.setItem(\"identity\",e.data.msg),console.log(\"分享者\"),this.$router.push(\"/\")):this.$message.error(\"未知错误，请稍后再尝试\"))})}):this.$message.error(\"验证码错误\")},randomNum:(e,t)=>Math.floor(Math.random()*(t-e)+e),refreshCode(){this.identifyCode=\"\",this.makeCode(this.identifyCodes,4)},makeCode(e,t){for(let e=0;e<t;e++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)];console.log(this.identifyCode)},goRegister(){this.$router.push(\"/register\")},gosmsLogin(){this.$router.push(\"/smslogin\")}},mounted(){this.identifyCode=\"\",this.makeCode(this.identifyCodes,4)}},i=(r(836),r(2)),o=Object(i.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{attrs:{id:\"login-wrap\"}},[r(\"div\",{staticClass:\"ms-login\"},[r(\"div\",{staticClass:\"ms-title\"},[e._v(\"登录\")]),e._v(\" \"),r(\"el-form\",{ref:\"login\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[r(\"el-form-item\",{attrs:{prop:\"username\"}},[r(\"el-input\",{attrs:{placeholder:\"username\"},model:{value:e.param.username,callback:function(t){e.$set(e.param,\"username\",t)},expression:\"param.username\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{prop:\"password\"}},[r(\"el-input\",{attrs:{type:\"password\",placeholder:\"password\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password,callback:function(t){e.$set(e.param,\"password\",t)},expression:\"param.password\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{prop:\"validate\"}},[r(\"el-input\",{staticClass:\"validate-code\",staticStyle:{display:\"inline-block\",width:\"150px\"},attrs:{placeholder:\"验证码\"},model:{value:e.param.validate,callback:function(t){e.$set(e.param,\"validate\",t)},expression:\"param.validate\"}}),e._v(\" \"),r(\"div\",{staticClass:\"code\",staticStyle:{display:\"inline-block\"},on:{click:e.refreshCode}},[r(\"s-identify\",{attrs:{identifyCode:e.identifyCode}})],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"login-btn\"},[r(\"el-button\",{staticStyle:{display:\"inline-block\",width:\"130px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"登录\")]),e._v(\" \"),r(\"el-button\",{staticStyle:{display:\"inline-block\",width:\"130px\"},attrs:{type:\"success\"},on:{click:function(t){return e.goRegister()}}},[e._v(\"注册\")])],1),e._v(\" \"),r(\"a\",{staticClass:\"login-tips\",staticStyle:{display:\"inline-block\",color:\"#222222\"},attrs:{href:\"/login\"}},[e._v(\"忘记密码?\")]),e._v(\" \"),r(\"el-link\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"175px\",color:\"#222222\"},attrs:{type:\"info\"},on:{click:function(t){return e.gosmsLogin()}}},[e._v(\"手机登录\")])],1)],1)])}),[],!1,null,\"7b6df301\",null);t.default=o.exports},844:function(e,t,r){\"use strict\";r.r(t);var s={data:function(){return{show:!0,count:\"\",timer:null,errors:\"\",error:!1,param:{username:\"\",password:\"\",password2:\"\",phone:\"\",code:\"\"},rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"}],password:[{validator:(e,t,r)=>{\"\"===t?r(new Error(\"请输入密码\")):(\"\"!==this.param.password&&this.$refs.register.validateField(\"password2\"),r())},required:!0,trigger:\"blur\"}],password2:[{validator:(e,t,r)=>{\"\"===t?r(new Error(\"请再次输入密码\")):t!==this.param.password?r(new Error(\"两次输入密码不一致!\")):r()},required:!0,trigger:\"blur\"}],phone:[{required:!0,message:\"请输入手机号\",trigger:\"blur\"}],code:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"},{type:\"number\",message:\"验证码必须为数字值\"}]}}},methods:{resetForm(e){this.$refs[e].resetFields()},submitForm(){this.$refs.register.validate(e=>{if(!e)return this.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;this.$message.success(\"登录成功\"),localStorage.setItem(\"ms_username\",this.param.username),this.$axios.post(\"api/login\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{this.$router.replace(\"/\")})})},getCode(){let e=this.param.phone,t=this.param.username,r=this.param.password,s=this.param.password2;if(e&&t&&r&&s)if(r!==s)this.errors=\"两次密码不一致\";else if(/^1[345678]\\d{9}$/.test(e)){this.$axios.post(\"api/register/sms\",this.$qs.stringify({phone:e}),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{console.log(\"aaa\")});const t=60;this.error=!1,this.timer||(this.count=t,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=t?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))}else this.error=!0,this.errors=\"请输入正确的手机号\";else this.error=!0,this.errors=\"资料不能为空\"}},mounted(){}},i=(r(838),r(2)),o=Object(i.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{attrs:{id:\"login-wrap\"}},[r(\"div\",{staticClass:\"ms-login\"},[r(\"div\",{staticClass:\"ms-title\"},[e._v(\"注册\")]),e._v(\" \"),r(\"el-form\",{ref:\"register\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[r(\"el-form-item\",{attrs:{prop:\"username\"}},[r(\"el-input\",{attrs:{placeholder:\"用户名\"},model:{value:e.param.username,callback:function(t){e.$set(e.param,\"username\",t)},expression:\"param.username\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{prop:\"password\"}},[r(\"el-input\",{attrs:{type:\"password\",placeholder:\"输入密码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password,callback:function(t){e.$set(e.param,\"password\",t)},expression:\"param.password\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{prop:\"password2\"}},[r(\"el-input\",{attrs:{type:\"password\",placeholder:\"再次输入密码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password2,callback:function(t){e.$set(e.param,\"password2\",t)},expression:\"param.password2\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{prop:\"phone\"}},[r(\"el-input\",{attrs:{placeholder:\"输入你的手机号\"},model:{value:e.param.phone,callback:function(t){e.$set(e.param,\"phone\",t)},expression:\"param.phone\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{staticStyle:{display:\"inline-block\",width:\"190px\"},attrs:{prop:\"code\"}},[r(\"el-input\",{attrs:{placeholder:\"验证码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.code,callback:function(t){e.$set(e.param,\"code\",t)},expression:\"param.code\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{staticStyle:{display:\"inline-block\"}},[e.show?r(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\"},on:{click:function(t){return e.getCode()}}},[e._v(\"获取验证码\")]):r(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\",disabled:\"\"},on:{click:function(t){return e.getCode()}}},[e._v(\"获取验证码\")])],1),e._v(\" \"),e.error?r(\"div\",{staticStyle:{color:\"red\",\"font-size\":\"10px\",\"margin-left\":\"180px\",\"margin-top\":\"-15px\"}},[e._v(e._s(e.errors))]):e._e(),e._v(\" \"),e.show?e._e():r(\"div\",{staticStyle:{color:\"#5daf34\",\"font-size\":\"10px\",\"margin-left\":\"130px\",\"margin-top\":\"-15px\"}},[e._v(\"短信已发送，\"+e._s(e.count)+\"s后重新发送\")]),e._v(\" \"),r(\"div\",{staticClass:\"login-btn\"},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"注册\")])],1),e._v(\" \"),r(\"el-button\",{staticStyle:{\"margin-left\":\"120px\"},attrs:{type:\"success\",size:\"mini\"},on:{click:function(t){return e.resetForm(\"register\")}}},[e._v(\"重置\")])],1)],1)])}),[],!1,null,\"9e78efd6\",null);t.default=o.exports},845:function(e,t,r){\"use strict\";r.r(t);var s={data:function(){return{show:!0,count:\"\",timer:null,errors:\"\",error:!1,param:{phone:\"\",code:\"\"},rules:{phone:[{required:!0,message:\"请输入手机号\",trigger:\"blur\"}],code:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"},{type:\"number\",message:\"验证码必须为数字值\"}]}}},methods:{submitForm(){this.$refs.login.validate(e=>{if(!e)return this.$message.error(\"请输入手机号和验证码\"),console.log(\"error submit!!\"),!1;this.$message.success(\"登录成功\"),localStorage.setItem(\"ms_username\",this.param.username),this.$axios.post(\"api/login/sms\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{this.$router.replace(\"/\")})})},getCode(){let e=this.param.phone;if(e)if(/^1[345678]\\d{9}$/.test(e)){this.$axios.post(\"api/login/sms\",this.$qs.stringify({phone:e}),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{console.log(\"aaa\")});const t=60;this.error=!1,this.timer||(this.count=t,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=t?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))}else this.error=!0,this.errors=\"请输入正确的手机号\";else this.error=!0,this.errors=\"手机号码不能为空\"}},mounted(){}},i=(r(840),r(2)),o=Object(i.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{attrs:{id:\"login-wrap\"}},[r(\"div\",{staticClass:\"ms-login\"},[r(\"div\",{staticClass:\"ms-title\"},[e._v(\"手机登录\")]),e._v(\" \"),r(\"el-form\",{ref:\"login\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[r(\"el-form-item\",{attrs:{prop:\"phone\"}},[r(\"el-input\",{attrs:{placeholder:\"输入你的手机号\"},model:{value:e.param.phone,callback:function(t){e.$set(e.param,\"phone\",t)},expression:\"param.phone\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{staticStyle:{display:\"inline-block\",width:\"190px\"},attrs:{prop:\"code\"}},[r(\"el-input\",{attrs:{placeholder:\"验证码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.code,callback:function(t){e.$set(e.param,\"code\",t)},expression:\"param.code\"}},[r(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),r(\"el-form-item\",{staticStyle:{display:\"inline-block\"}},[e.show?r(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\"},on:{click:function(t){return e.getCode()}}},[e._v(\"获取验证码\")]):r(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\",disabled:\"\"},on:{click:function(t){return e.getCode()}}},[e._v(\"获取验证码\")])],1),e._v(\" \"),e.error?r(\"div\",{staticStyle:{color:\"red\",\"font-size\":\"10px\",\"margin-left\":\"180px\",\"margin-top\":\"-15px\"}},[e._v(e._s(e.errors))]):e._e(),e._v(\" \"),e.show?e._e():r(\"div\",{staticStyle:{color:\"#5daf34\",\"font-size\":\"10px\",\"margin-left\":\"130px\",\"margin-top\":\"-15px\"}},[e._v(\"短信已发送，\"+e._s(e.count)+\"s后重新发送\")]),e._v(\" \"),r(\"div\",{staticClass:\"login-btn\"},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"登录\")])],1)],1)],1)])}),[],!1,null,\"a455c7ec\",null);t.default=o.exports}}]);","extractedComments":[]}