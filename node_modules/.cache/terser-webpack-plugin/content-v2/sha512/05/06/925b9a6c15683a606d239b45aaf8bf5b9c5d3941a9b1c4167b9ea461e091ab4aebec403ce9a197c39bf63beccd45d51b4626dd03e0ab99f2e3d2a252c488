{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{773:function(e,t,i){\"use strict\";i.r(t);var s=[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"header1\"},[t(\"div\",{staticClass:\"logo\"},[t(\"img\",{staticStyle:{width:\"100px\",height:\"100px\",\"margin-left\":\"10px\"},attrs:{src:i(776)}}),this._v(\" \"),t(\"div\",{staticStyle:{color:\"darkslategray\",\"font-size\":\"20px\",\"font-weight\":\"bold\"}},[this._v(\"siushare.com\")])]),this._v(\" \"),t(\"div\",{staticClass:\"title\"},[t(\"span\",[t(\"p\",{staticStyle:{\"font-size\":\"25px\",\"font-family\":\"'Apple Color Emoji'\",position:\"absolute\",\"margin-left\":\"-30px\",\"margin-top\":\"75px\"}},[this._v(\"欢迎登录\")])])])])}],a={data:function(){return{loading:!1,identifyCodes:\"1234567890\",identifyCode:\"\",param:{username:\"\",password:\"\",validate:\"\"},rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"}],validate:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]}}},methods:{submitForm(){this.loading=!0,this.param.validate===this.identifyCode?this.$refs.login.validate(e=>{if(!e)return this.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;this.$axios.post(\"/api/login\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{if(localStorage.setItem(\"ms_username\",this.param.username),console.log(e),null!=e)if(1==JSON.parse(e.data.msg).role){this.loading=!1,localStorage.setItem(\"identity\",JSON.parse(e.data.msg).role),console.log(\"普通用户\"),sessionStorage.setItem(\"role\",\"普通用户\"),console.log(this.$route.query.redirect);let t=decodeURIComponent(this.$route.query.redirect||\"/\");this.$router.push({path:t})}else if(2==JSON.parse(e.data.msg).role){this.loading=!1,localStorage.setItem(\"identity\",JSON.parse(e.data.msg).role),console.log(\"商家\"),sessionStorage.setItem(\"role\",\"商家\"),console.log(this.$route.query.redirect);let t=decodeURIComponent(this.$route.query.redirect||\"/\");this.$router.push({path:t})}else if(3==JSON.parse(e.data.msg).role){this.loading=!1,localStorage.setItem(\"identity\",JSON.parse(e.data.msg).role),sessionStorage.setItem(\"role\",\"商家\"),console.log(\"分享者\"),console.log(this.$route.query.redirect);let t=decodeURIComponent(this.$route.query.redirect||\"/\");this.$router.push({path:t})}else this.loading=!1,this.$message.error(\"未知错误，请稍后再尝试1\");else this.loading=!1,this.$message.error(\"未知错误，请稍后再尝试2\")})}):(this.param.username=\"\",this.param.password=\"\",this.param.validate=\"\",this.refreshCode(),this.$message.error(\"验证码错误\"),this.loading=!1)},randomNum:(e,t)=>Math.floor(Math.random()*(t-e)+e),refreshCode(){this.identifyCode=\"\",this.makeCode(this.identifyCodes,4)},makeCode(e,t){for(let e=0;e<t;e++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)];console.log(this.identifyCode)},goRegister(){this.$router.push(\"/register\")},gosmsLogin(){this.$router.push(\"/smslogin\")}},mounted(){this.identifyCode=\"\",this.makeCode(this.identifyCodes,4)}},r=(i(860),i(73)),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",[e._m(0),e._v(\" \"),i(\"div\",{attrs:{id:\"login-wrap\"}},[i(\"div\",{staticClass:\"ms-login\"},[i(\"div\",{staticClass:\"ms-title\",staticStyle:{color:\"black\"}},[e._v(\"登录\")]),e._v(\" \"),i(\"el-form\",{ref:\"login\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[i(\"el-form-item\",{attrs:{prop:\"username\"}},[i(\"el-input\",{attrs:{placeholder:\"username\"},model:{value:e.param.username,callback:function(t){e.$set(e.param,\"username\",t)},expression:\"param.username\"}},[i(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),i(\"el-form-item\",{attrs:{prop:\"password\"}},[i(\"el-input\",{attrs:{type:\"password\",placeholder:\"password\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password,callback:function(t){e.$set(e.param,\"password\",t)},expression:\"param.password\"}},[i(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),i(\"el-form-item\",{attrs:{prop:\"validate\"}},[i(\"el-input\",{staticClass:\"validate-code\",staticStyle:{display:\"inline-block\",width:\"150px\"},attrs:{placeholder:\"验证码\"},model:{value:e.param.validate,callback:function(t){e.$set(e.param,\"validate\",t)},expression:\"param.validate\"}}),e._v(\" \"),i(\"div\",{staticClass:\"code\",staticStyle:{display:\"inline-block\"},on:{click:e.refreshCode}},[i(\"s-identify\",{attrs:{identifyCode:e.identifyCode}})],1)],1),e._v(\" \"),i(\"div\",{staticClass:\"login-btn\"},[i(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{display:\"inline-block\",width:\"130px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"登录\\n                    \")]),e._v(\" \"),i(\"el-button\",{staticStyle:{display:\"inline-block\",width:\"130px\"},attrs:{type:\"success\"},on:{click:function(t){return e.goRegister()}}},[e._v(\"注册\\n                    \")])],1),e._v(\" \"),i(\"el-link\",{staticStyle:{display:\"inline-block\",color:\"#222222\"},attrs:{type:\"info\",href:\"/login\"}},[e._v(\"忘记密码?\")]),e._v(\" \"),i(\"el-link\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"160px\",color:\"#222222\",position:\"absolute\",\"margin-top\":\"5px\"},attrs:{type:\"info\"},on:{click:function(t){return e.gosmsLogin()}}},[e._v(\"手机登录\\n                \")]),e._v(\" \"),i(\"el-form-item\",[i(\"el-switch\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"200px\"},model:{value:e.param.rememberMe,callback:function(t){e.$set(e.param,\"rememberMe\",t)},expression:\"param.rememberMe\"}}),e._v(\" \"),i(\"p\",{staticStyle:{display:\"inline-block\"}},[e._v(\"记住我\")])],1)],1)],1)]),e._v(\" \"),i(\"div\",{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"15px\",\"font-size\":\"20px\"}},[i(\"el-link\",{attrs:{type:\"primary\",href:\"/\"}},[e._v(\"关于我们\")]),e._v(\"\\n        |\\n        \"),i(\"el-link\",{attrs:{type:\"primary\",href:\"/\"}},[e._v(\"联系我们\")]),e._v(\"\\n        |\\n        \"),i(\"el-link\",{attrs:{type:\"primary\",href:\"/\"}},[e._v(\"广告服务\")])],1),e._v(\" \"),i(\"div\",{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"15px\",\"font-size\":\"15px\"}},[e._v(\"Copyright @ 2019-2020 siushare.com 版权所有\")])])}),s,!1,null,\"62144ed2\",null);t.default=o.exports},776:function(e,t,i){e.exports=i.p+\"assets/images/logo.png\"},806:function(e,t,i){var s=i(861);\"string\"==typeof s&&(s=[[e.i,s,\"\"]]),s.locals&&(e.exports=s.locals);(0,i(138).default)(\"38dbc8af\",s,!0,{})},860:function(e,t,i){\"use strict\";var s=i(806);i.n(s).a},861:function(e,t,i){}}]);","extractedComments":[]}