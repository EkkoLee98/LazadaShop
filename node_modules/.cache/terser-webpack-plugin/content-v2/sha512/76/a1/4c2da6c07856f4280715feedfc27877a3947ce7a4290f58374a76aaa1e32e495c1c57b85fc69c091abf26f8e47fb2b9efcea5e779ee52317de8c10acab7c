{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{765:function(e,t,a){\"use strict\";a.r(t);var l={name:\"AllShops\",data:()=>({query:{address:\"\",name:\"\",pageIndex:1,pageSize:10},tableData:[],tableData1:[],multipleSelection:[],editVisible:!1,dialogVisible:!1,shareurl:\"\"}),created(){this.GetMerchant()},methods:{getUrl(e){this.$axios.post(\"/api/share/generationShareUrl\",this.$qs.stringify({itemId:e.itemId}),{headers:{contentType:\"application/json;charset=UTF-8\"}}).then(t=>{console.log(t.data),200==t.data.code?(this.dialogVisible=!0,this.shareurl=\"http://siushare.com/coupon/share?shareId=\"+t.data.msg+\"&itemId=\"+e.itemId):33==t.data.code&&this.$notify({title:\"成功\",message:\"已生成过相同的URL！\",type:\"success\"})})},onCopy(e){this.$notify({title:\"成功\",message:\"复制成功\",type:\"success\"}),this.dialogVisible=!1,console.log(e)},onError(e){this.$notify.error({title:\"错误\",message:\"复制失败\"}),this.dialogVisible=!1},handleClose(e){this.$confirm(\"确认关闭？\").then(t=>{e()}).catch(e=>{})},GetMerchant(){this.$axios.post(\"/api/share/getMerchant\",{},{headers:{contentType:\"application/json;charset=UTF-8\"}}).then(e=>{console.log(e.data.msg),this.tableData=JSON.parse(e.data.msg)})},handleSelectionChange(e){this.multipleSelection=e},handleEdit(e){this.$axios.post(\"/api/share/getcouponinfo\",this.$qs.stringify({merchantId:e}),{headers:{contentType:\"application/x-www-form-urlencoded\"}}).then(e=>{\"该商铺尚未设置优惠券\"===e.data.msg?this.$notify.error({title:\"错误\",message:e.data.msg}):(this.editVisible=!0,console.log(e.data),this.tableData1=e.data.msg)})}},mounted(){}},i=(a(846),a(73)),n=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-cascades\"}),e._v(\" 所有商家\\n              \")])],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"container\"},[a(\"el-table\",{ref:\"multipleTable\",staticClass:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:\"\",\"header-cell-class-name\":\"table-header\",height:\"500\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"店铺Id\",width:\"150\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.merchantID))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"商家信息\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.merchantAccount))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(a){return e.handleEdit(t.row.merchantID)}}},[e._v(\"查看优惠券\")])]}}])})],1)],1),e._v(\" \"),a(\"el-dialog\",{attrs:{title:\"商家优惠券\",visible:e.editVisible,width:\"50%\"},on:{\"update:visible\":function(t){e.editVisible=t}}},[a(\"el-table\",{ref:\"multipleTable\",staticClass:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData1,border:\"\",\"header-cell-class-name\":\"table-header\",height:\"500\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"商品Id\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.itemId))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"商家用户名\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.merchantAccount))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"原价\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.officialPrice))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"现价\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.couponPrice))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"截止时间\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.endTime))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(a){return e.getUrl(t.row)}}},[e._v(\"生成URL\")])]}}])})],1)],1),e._v(\" \"),a(\"el-dialog\",{attrs:{title:\"生成URL成功\",visible:e.dialogVisible,width:\"30%\",\"before-close\":e.handleClose},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[e._v(\"\\n          生成URL成功：\"),a(\"span\",[e._v(\"您生成的URL为:  \"+e._s(e.shareurl)+\"  快去跟大家分享吧！\")]),e._v(\" \"),a(\"el-button\",{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:e.shareurl,expression:\"shareurl\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:e.onCopy,expression:\"onCopy\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:e.onError,expression:\"onError\",arg:\"error\"}],staticClass:\"ml10\",attrs:{type:\"text\",size:\"medium\"}},[e._v(\"点击复制\")]),e._v(\" \"),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"确 定\")])],1)],1)],1)}),[],!1,null,\"33dc9314\",null);t.default=n.exports},799:function(e,t,a){var l=a(847);\"string\"==typeof l&&(l=[[e.i,l,\"\"]]),l.locals&&(e.exports=l.locals);(0,a(138).default)(\"4016cf0d\",l,!0,{})},846:function(e,t,a){\"use strict\";var l=a(799);a.n(l).a},847:function(e,t,a){}}]);","extractedComments":[]}