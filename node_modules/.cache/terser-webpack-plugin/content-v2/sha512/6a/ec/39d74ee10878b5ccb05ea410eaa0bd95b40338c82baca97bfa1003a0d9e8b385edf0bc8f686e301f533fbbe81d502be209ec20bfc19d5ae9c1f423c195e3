{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{647:function(t,e,s){\"use strict\";s.r(e);var i=[function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"header1\"},[e(\"div\",{staticClass:\"logo\"},[e(\"img\",{staticStyle:{width:\"100px\",height:\"100px\",\"margin-left\":\"10px\"},attrs:{src:s(648)}}),this._v(\" \"),e(\"div\",{staticStyle:{color:\"darkslategray\",\"font-size\":\"20px\",\"font-weight\":\"bold\"}},[this._v(\"siushare.com\")])]),this._v(\" \"),e(\"div\",{staticClass:\"title\"},[e(\"span\",[e(\"p\",{staticStyle:{\"font-size\":\"25px\",\"font-family\":\"'Apple Color Emoji'\",position:\"absolute\",\"margin-left\":\"-30px\",\"margin-top\":\"75px\"}},[this._v(\"欢迎登录\")])])])])}],a={data:function(){return{show:!0,count:\"\",timer:null,errors:\"\",error:!1,param:{mobile:\"\",smsCode:\"\"},rules:{mobile:[{required:!0,message:\"请输入手机号\",trigger:\"blur\"}],smsCode:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]}}},methods:{goLogin(){this.$router.push(\"/login\")},submitForm(){this.$refs.login.validate(t=>{if(!t)return this.$message.error(\"请输入手机号和验证码\"),console.log(\"error submit!!\"),!1;this.$axios.post(this.$api.loginsms,this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(t=>{null!==t.data&&(console.log(t),console.log(JSON.parse(t.data.msg)),console.log(JSON.parse(t.data.msg).name),console.log(JSON.parse(t.data.msg).role),1==JSON.parse(t.data.msg).role?(localStorage.setItem(\"ms_username\",JSON.parse(t.data.msg).name),localStorage.setItem(\"identity\",JSON.parse(t.data.msg).role),console.log(\"消费者\"),sessionStorage.setItem(\"role\",\"消费者\"),this.$message.success(\"登录成功\")):2==JSON.parse(t.data.msg).role?(localStorage.setItem(\"ms_username\",JSON.parse(t.data.msg).name),localStorage.setItem(\"identity\",JSON.parse(t.data.msg).role),console.log(\"商家\"),sessionStorage.setItem(\"role\",\"商家\"),this.$message.success(\"登录成功\")):3==JSON.parse(t.data.msg).role&&(localStorage.setItem(\"ms_username\",JSON.parse(t.data.msg).name),localStorage.setItem(\"identity\",JSON.parse(t.data.msg).role),console.log(\"分享者\"),sessionStorage.setItem(\"role\",\"分享者\"),this.$message.success(\"登录成功\"))),this.$router.replace(\"/\")})})},getCode(){let t=this.param.mobile;if(t)if(/^1[345678]\\d{9}$/.test(t)){this.$axios.get(this.$api.loginsms,{params:{mobile:t}}).then(t=>{console.log(t.data),console.log(\"aaa\")});const e=60;this.error=!1,this.timer||(this.count=e,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=e?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))}else this.error=!0,this.errors=\"请输入正确的手机号\";else this.error=!0,this.errors=\"手机号码不能为空\"}},mounted(){}},o=(s(735),s(64)),l=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[t._m(0),t._v(\" \"),s(\"div\",{attrs:{id:\"login-wrap\"}},[s(\"div\",{staticClass:\"ms-login\"},[s(\"div\",{staticClass:\"ms-title\",staticStyle:{color:\"black\"}},[t._v(\"手机登录\")]),t._v(\" \"),s(\"el-form\",{ref:\"login\",staticClass:\"ms-content\",attrs:{model:t.param,rules:t.rules,\"label-width\":\"0px\"}},[s(\"el-form-item\",{attrs:{prop:\"phone\"}},[s(\"i\",{staticClass:\"el-icon-lx-people\",staticStyle:{display:\"inline-block\"}}),t._v(\" \"),s(\"el-input\",{staticStyle:{display:\"inline-block\",width:\"270px\"},attrs:{placeholder:\"输入你的手机号\"},model:{value:t.param.mobile,callback:function(e){t.$set(t.param,\"mobile\",e)},expression:\"param.mobile\"}})],1),t._v(\" \"),s(\"el-form-item\",{staticStyle:{display:\"inline-block\",width:\"190px\"},attrs:{prop:\"code\"}},[s(\"i\",{staticClass:\"el-icon-lx-lock\",staticStyle:{display:\"inline-block\"}}),t._v(\" \"),s(\"el-input\",{staticStyle:{display:\"inline-block\",width:\"170px\"},attrs:{placeholder:\"验证码\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.submitForm()}},model:{value:t.param.smsCode,callback:function(e){t.$set(t.param,\"smsCode\",e)},expression:\"param.smsCode\"}})],1),t._v(\" \"),s(\"el-form-item\",{staticStyle:{display:\"inline-block\"}},[t.show?s(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\"},on:{click:function(e){return t.getCode()}}},[t._v(\"获取验证码\")]):s(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\",disabled:\"\"},on:{click:function(e){return t.getCode()}}},[t._v(\"获取验证码\")])],1),t._v(\" \"),t.error?s(\"div\",{staticStyle:{color:\"red\",\"font-size\":\"10px\",\"margin-left\":\"180px\",\"margin-top\":\"-15px\"}},[t._v(t._s(t.errors))]):t._e(),t._v(\" \"),t.show?t._e():s(\"div\",{staticStyle:{color:\"#5daf34\",\"font-size\":\"10px\",\"margin-left\":\"130px\",\"margin-top\":\"-15px\"}},[t._v(\"短信已发送，\"+t._s(t.count)+\"s后重新发送\")]),t._v(\" \"),s(\"div\",{staticClass:\"login-btn\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.submitForm()}}},[t._v(\"登录\")])],1),t._v(\" \"),s(\"el-form-item\",{staticStyle:{\"margin-top\":\"-20px\"}},[s(\"el-link\",{staticStyle:{display:\"inline-block\",\"margin-top\":\"5px\",color:\"#222222\"},attrs:{type:\"info\"},on:{click:function(e){return t.goLogin()}}},[t._v(\"账密登录\\n                    \")]),t._v(\" \"),s(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"130px\"}},[s(\"el-switch\",{staticStyle:{display:\"inline-block\"},model:{value:t.param.rememberMe,callback:function(e){t.$set(t.param,\"rememberMe\",e)},expression:\"param.rememberMe\"}}),t._v(\" \"),s(\"p\",{staticStyle:{display:\"inline-block\"}},[t._v(\"记住我\")])],1)],1)],1)],1)]),t._v(\" \"),s(\"div\",{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"15px\",\"font-size\":\"20px\"}},[s(\"el-link\",{attrs:{type:\"primary\",href:\"/\"}},[t._v(\"关于我们\")]),t._v(\"  |  \"),s(\"el-link\",{attrs:{type:\"primary\",href:\"/\"}},[t._v(\"联系我们\")]),t._v(\"  |  \"),s(\"el-link\",{attrs:{type:\"primary\",href:\"/\"}},[t._v(\"广告服务\")])],1),t._v(\" \"),s(\"div\",{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"15px\",\"font-size\":\"15px\"}},[t._v(\"Copyright @ 2019-2020 siushare.com 版权所有\")])])}),i,!1,null,\"6b1b3bce\",null);e.default=l.exports},648:function(t,e,s){t.exports=s.p+\"assets/images/logo.png\"},680:function(t,e,s){var i=s(736);\"string\"==typeof i&&(i=[[t.i,i,\"\"]]),i.locals&&(t.exports=i.locals);(0,s(158).default)(\"abdbdfa2\",i,!0,{})},735:function(t,e,s){\"use strict\";var i=s(680);s.n(i).a},736:function(t,e,s){}}]);","extractedComments":[]}