{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{825:function(e,t,s){var r=s(837);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);(0,s(13).default)(\"54717ae9\",r,!0,{})},826:function(e,t,s){var r=s(839);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);(0,s(13).default)(\"b9da6c68\",r,!0,{})},827:function(e,t,s){var r=s(841);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);(0,s(13).default)(\"239ff85a\",r,!0,{})},836:function(e,t,s){\"use strict\";var r=s(825);s.n(r).a},837:function(e,t,s){},838:function(e,t,s){\"use strict\";var r=s(826);s.n(r).a},839:function(e,t,s){},840:function(e,t,s){\"use strict\";var r=s(827);s.n(r).a},841:function(e,t,s){},843:function(e,t,s){\"use strict\";s.r(t);var r={data:function(){return{identifyCodes:\"1234567890\",identifyCode:\"\",param:{username:\"\",password:\"\",validate:\"\"},rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"}],validate:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]}}},methods:{checkstatus(){null!=localStorage.getItem(\"ms_username\")&&this.$router.replace(\"/\")},submitForm(){this.param.validate===this.identifyCode?this.$refs.login.validate(e=>{if(!e)return this.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;this.$message.success(\"登录成功\"),localStorage.setItem(\"ms_username\",this.param.username),this.$axios.post(\"/api/login\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{console.log(e),null!=e&&(1===e.data.msg?(localStorage.setItem(\"identity\",e.data.msg),console.log(\"普通用户\"),this.$router.go(-1)):2===e.data.msg?(localStorage.setItem(\"identity\",e.data.msg),console.log(\"商家\"),this.$router.push(\"/\")):3===e.data.msg?(localStorage.setItem(\"identity\",e.data.msg),console.log(\"分享者\"),this.$router.push(\"/\")):this.$message.error(\"未知错误，请稍后再尝试\"))})}):this.$message.error(\"验证码错误\")},randomNum:(e,t)=>Math.floor(Math.random()*(t-e)+e),refreshCode(){this.identifyCode=\"\",this.makeCode(this.identifyCodes,4)},makeCode(e,t){for(let e=0;e<t;e++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)];console.log(this.identifyCode)},goRegister(){this.$router.push(\"/register\")},gosmsLogin(){this.$router.push(\"/smslogin\")}},mounted(){this.checkstatus(),this.identifyCode=\"\",this.makeCode(this.identifyCodes,4)}},a=(s(836),s(2)),i=Object(a.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{attrs:{id:\"login-wrap\"}},[s(\"div\",{staticClass:\"ms-login\"},[s(\"div\",{staticClass:\"ms-title\"},[e._v(\"登录\")]),e._v(\" \"),s(\"el-form\",{ref:\"login\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[s(\"el-form-item\",{attrs:{prop:\"username\"}},[s(\"el-input\",{attrs:{placeholder:\"username\"},model:{value:e.param.username,callback:function(t){e.$set(e.param,\"username\",t)},expression:\"param.username\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{attrs:{prop:\"password\"}},[s(\"el-input\",{attrs:{type:\"password\",placeholder:\"password\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password,callback:function(t){e.$set(e.param,\"password\",t)},expression:\"param.password\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{attrs:{prop:\"validate\"}},[s(\"el-input\",{staticClass:\"validate-code\",staticStyle:{display:\"inline-block\",width:\"150px\"},attrs:{placeholder:\"验证码\"},model:{value:e.param.validate,callback:function(t){e.$set(e.param,\"validate\",t)},expression:\"param.validate\"}}),e._v(\" \"),s(\"div\",{staticClass:\"code\",staticStyle:{display:\"inline-block\"},on:{click:e.refreshCode}},[s(\"s-identify\",{attrs:{identifyCode:e.identifyCode}})],1)],1),e._v(\" \"),s(\"div\",{staticClass:\"login-btn\"},[s(\"el-button\",{staticStyle:{display:\"inline-block\",width:\"130px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"登录\")]),e._v(\" \"),s(\"el-button\",{staticStyle:{display:\"inline-block\",width:\"130px\"},attrs:{type:\"success\"},on:{click:function(t){return e.goRegister()}}},[e._v(\"注册\")])],1),e._v(\" \"),s(\"a\",{staticClass:\"login-tips\",staticStyle:{display:\"inline-block\",color:\"#222222\"},attrs:{href:\"/login\"}},[e._v(\"忘记密码?\")]),e._v(\" \"),s(\"el-link\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"175px\",color:\"#222222\"},attrs:{type:\"info\"},on:{click:function(t){return e.gosmsLogin()}}},[e._v(\"手机登录\")])],1)],1)])}),[],!1,null,\"0339f38f\",null);t.default=i.exports},844:function(e,t,s){\"use strict\";s.r(t);var r={data:function(){return{param:{username:\"\",password:\"\",password2:\"\",phone:\"\",smsCode:\"\"},rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"}],password:[{validator:(e,t,s)=>{\"\"===t?s(new Error(\"请输入密码\")):(\"\"!==this.param.password&&this.$refs.register.validateField(\"password2\"),s())},required:!0,trigger:\"blur\"}],password2:[{validator:(e,t,s)=>{\"\"===t?s(new Error(\"请再次输入密码\")):t!==this.param.password?s(new Error(\"两次输入密码不一致!\")):s()},required:!0,trigger:\"blur\"}],phone:[{required:!0,message:\"请输入手机号\",trigger:\"blur\"}],smsCode:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]}}},methods:{resetForm(e){this.$refs[e].resetFields()},submitForm(){this.$refs.register.validate(e=>{if(!e)return this.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;this.$message.success(\"登录成功\"),localStorage.setItem(\"ms_username\",this.param.username),this.$axios.post(\"api/login\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{this.$router.replace(\"/\")})})},getCode(){let e=this.param.phone;this.$notify({title:\"成功\",message:\"短信已发送 有效时间为60S\",type:\"success\"}),this.$axios.post(\"api/register/sms\",this.$qs.stringify(e),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{console.log(\"aaa\")})}},mounted(){}},a=(s(838),s(2)),i=Object(a.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{attrs:{id:\"login-wrap\"}},[s(\"div\",{staticClass:\"ms-login\"},[s(\"div\",{staticClass:\"ms-title\"},[e._v(\"注册\")]),e._v(\" \"),s(\"el-form\",{ref:\"register\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[s(\"el-form-item\",{attrs:{prop:\"username\"}},[s(\"el-input\",{attrs:{placeholder:\"用户名\"},model:{value:e.param.username,callback:function(t){e.$set(e.param,\"username\",t)},expression:\"param.username\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{attrs:{prop:\"password\"}},[s(\"el-input\",{attrs:{type:\"password\",placeholder:\"输入密码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password,callback:function(t){e.$set(e.param,\"password\",t)},expression:\"param.password\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{attrs:{prop:\"password2\"}},[s(\"el-input\",{attrs:{type:\"password\",placeholder:\"再次输入密码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.password2,callback:function(t){e.$set(e.param,\"password2\",t)},expression:\"param.password2\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{staticStyle:{display:\"inline-block\",width:\"190px\"},attrs:{prop:\"phone\"}},[s(\"el-input\",{attrs:{placeholder:\"手机号\"},model:{value:e.param.phone,callback:function(t){e.$set(e.param,\"phone\",t)},expression:\"param.phone\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-phone\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{staticStyle:{display:\"inline-block\"}},[s(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\"},on:{click:function(t){return e.getCode()}}},[e._v(\"获取验证码\")])],1),e._v(\" \"),s(\"div\",{staticClass:\"login-btn\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"注册\")])],1),e._v(\" \"),s(\"el-button\",{staticStyle:{\"margin-left\":\"120px\"},attrs:{type:\"success\",size:\"mini\"},on:{click:function(t){return e.resetForm(\"register\")}}},[e._v(\"重置\")])],1)],1)])}),[],!1,null,\"10e87bd2\",null);t.default=i.exports},845:function(e,t,s){\"use strict\";s.r(t);var r={data:function(){return{param:{phone:\"\",smsCode:\"\"},rules:{phone:[{required:!0,message:\"请输入手机号\",trigger:\"blur\"}],smsCode:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]}}},methods:{submitForm(){this.$refs.login.validate(e=>{if(!e)return this.$message.error(\"请输入手机号和验证码\"),console.log(\"error submit!!\"),!1;this.$message.success(\"登录成功\"),localStorage.setItem(\"ms_username\",this.param.username),this.$axios.post(\"api/login/sms\",this.$qs.stringify(this.param),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{this.$router.replace(\"/\")})})},getCode(){let e=this.param.phone;this.$notify({title:\"成功\",message:\"短信已发送 有效时间为60S\",type:\"success\"}),this.$axios.post(\"api/login/sms\",this.$qs.stringify(e),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{console.log(\"aaa\")})}},mounted(){}},a=(s(840),s(2)),i=Object(a.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{attrs:{id:\"login-wrap\"}},[s(\"div\",{staticClass:\"ms-login\"},[s(\"div\",{staticClass:\"ms-title\"},[e._v(\"手机登录\")]),e._v(\" \"),s(\"el-form\",{ref:\"login\",staticClass:\"ms-content\",attrs:{model:e.param,rules:e.rules,\"label-width\":\"0px\"}},[s(\"el-form-item\",{attrs:{prop:\"phone\"}},[s(\"el-input\",{attrs:{placeholder:\"输入你的手机号\"},model:{value:e.param.phone,callback:function(t){e.$set(e.param,\"phone\",t)},expression:\"param.phone\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{staticStyle:{display:\"inline-block\",width:\"190px\"},attrs:{prop:\"smsCode\"}},[s(\"el-input\",{attrs:{placeholder:\"验证码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitForm()}},model:{value:e.param.smsCode,callback:function(t){e.$set(e.param,\"smsCode\",t)},expression:\"param.smsCode\"}},[s(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"el-form-item\",{staticStyle:{display:\"inline-block\"}},[s(\"el-button\",{attrs:{type:\"primary\",plain:\"\",size:\"mini\"},on:{click:function(t){return e.getCode()}}},[e._v(\"获取验证码\")])],1),e._v(\" \"),s(\"div\",{staticClass:\"login-btn\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm()}}},[e._v(\"登录\")])],1)],1)],1)])}),[],!1,null,\"013eaf71\",null);t.default=i.exports}}]);","extractedComments":[]}