{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{633:function(e,t,i){\"use strict\";i.r(t);var l={name:\"allproducts\",data:()=>({query:{sid:\"\",pageIndex:1},tableData:[],nid:\"\",ntitle:\"\",nprice:\"\",nimg:\"\",products:[],product:[],multipleSelection:[],delList:[],editVisible:!1,editVisible2:!1,Visible:!1,pageTotal:0,form:{itemId:\"\",officialUrl:\"\",officialImageUrl:\"\",number:\"\",voucherId:\"\",officialPrice:\"\",couponPrice:\"\",couponInfo:\"\",startTime:\"\",endTime:\"\",productName:\"\"},form2:{itemId:\"\",officialUrl:\"\",officialImageUrl:\"\",number:\"\",voucherId:\"\",officialPrice:\"\",couponPrice:\"\",couponInfo:\"\",startTime:\"\",endTime:\"\",productName:\"\"},idx:-1,id:-1}),created(){this.getProducts()},methods:{getProducts(){this.$axios.post(this.$api.productAll,{},{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(e=>{this.all=!0,this.products=e.data,console.log(\"success\"),console.log(e.data),this.tableData=JSON.parse(this.products.msg.productsJsonInfo),this.pageTotal=this.tableData.length,console.log(this.tableData),console.log(this.pageTotal)})},handleSearch(){for(var e=new RegExp(this.query.sid),t=[],i=0;i<this.tableData.length;i++)e.test(this.tableData[i][1])&&t.push(this.tableData[i]);console.log(t),null!=t&&(this.tableData=t)},handleSelectionChange(e){this.multipleSelection=e},handleEdit(e){this.editVisible=!0,this.form.itemId=e[0],this.form.officialUrl=e[2],this.form.officialImageUrl=e[3],this.form.officialPrice=e[4],this.form.productName=e[1]},handleEdit2(){this.Visible=!1,this.editVisible2=!0},saveEdit(){this.$axios.post(this.$api.couponOperate,JSON.stringify(this.form),{headers:{contentType:\"application/json;charset=UTF-8\",\"Content-Type\":\"application/json\"}}).then(e=>{console.log(e.data),1==e.data.msg?(this.$message.success(\"设置成功\"),this.form.number=\"\",this.form.voucherId=\"\",this.form.couponPrice=\"\",this.form.couponInfo=\"\",this.form.startTime=\"\",this.form.endTime=\"\",this.editVisible=!1):1!==e.data.msg&&(this.$message.error(\"设置失败\"),this.form.number=\"\",this.form.voucherId=\"\",this.form.couponPrice=\"\",this.form.couponInfo=\"\",this.form.startTime=\"\",this.form.endTime=\"\",this.editVisible=!1)}).catch(e=>{console.log(e.message),console.log(e.request),console.log(e.code)})},saveEdit2(){this.editVisible2=!1,this.$axios.post(\"/api/merchant/couponOperate\",JSON.stringify(this.form),{headers:{contentType:\"application/json;charset=UTF-8\",\"Content-Type\":\"application/json\"}}).then(e=>{console.log(e.data),1==e.data.msg?(this.$message.success(\"设置成功\"),this.form2.number=\"\",this.form2.voucherId=\"\",this.form2.couponPrice=\"\",this.form2.couponInfo=\"\",this.form2.startTime=\"\",this.form2.endTime=\"\"):(this.$message.error(\"设置失败\"),this.form2.number=\"\",this.form2.voucherId=\"\",this.form2.couponPrice=\"\",this.form2.couponInfo=\"\",this.form2.startTime=\"\",this.form2.endTime=\"\")})},handlePageChange(e){this.$set(this.query,\"pageIndex\",e),this.getData()}},mounted(){}},o=(i(709),i(64)),a=Object(o.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",[i(\"div\",{staticClass:\"crumbs\"},[i(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[i(\"el-breadcrumb-item\",[i(\"i\",{staticClass:\"el-icon-lx-cascades\"}),e._v(\" 所有商品\\n            \")])],1)],1),e._v(\" \"),i(\"div\",{staticClass:\"container\"},[i(\"div\",{staticClass:\"handle-box\"},[i(\"el-button\",{staticClass:\"handle-del mr10\",staticStyle:{width:\"100px\"},attrs:{type:\"primary\",icon:\"el-icon-delete\"},on:{click:e.getProducts}},[e._v(\"所有商品\\n            \")]),e._v(\" \"),i(\"el-input\",{staticClass:\"handle-input mr10\",staticStyle:{width:\"400px\"},attrs:{placeholder:\"商品名\"},model:{value:e.query.sid,callback:function(t){e.$set(e.query,\"sid\",t)},expression:\"query.sid\"}}),e._v(\" \"),i(\"el-button\",{staticStyle:{width:\"100px\"},attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")])],1),e._v(\" \"),i(\"el-table\",{ref:\"multipleTable\",staticClass:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:\"\",\"header-cell-class-name\":\"table-header\",height:\"500\"},on:{\"selection-change\":e.handleSelectionChange}},[i(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),e._v(\" \"),i(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\",width:\"150\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row[0]))]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{prop:\"name\",label:\"商品名\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row[1]))]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"商品价格\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\"￥\"+e._s(t.row[4]))]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"商品图片\",align:\"center\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(e){return[i(\"el-image\",{staticClass:\"table-td-thumb\",attrs:{src:e.row[3],\"preview-src-list\":[e.row[3]]}})]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v(\"设置优惠券\\n                    \")])]}}])})],1)],1),e._v(\" \"),i(\"el-dialog\",{attrs:{title:\"设置优惠券\",visible:e.editVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.editVisible=t}}},[i(\"el-form\",{ref:\"form\",attrs:{model:e.form,\"label-width\":\"70px\"}},[i(\"el-form-item\",{attrs:{label:\"商品Id\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form.itemId,callback:function(t){e.$set(e.form,\"itemId\",t)},expression:\"form.itemId\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"商品名\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form.productName,callback:function(t){e.$set(e.form,\"productName\",t)},expression:\"form.productName\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"官方链接\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form.officialUrl,callback:function(t){e.$set(e.form,\"officialUrl\",t)},expression:\"form.officialUrl\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"图片链接\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form.officialImageUrl,callback:function(t){e.$set(e.form,\"officialImageUrl\",t)},expression:\"form.officialImageUrl\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"数量\"}},[i(\"el-input\",{model:{value:e.form.number,callback:function(t){e.$set(e.form,\"number\",t)},expression:\"form.number\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"应用码\"}},[i(\"el-input\",{model:{value:e.form.voucherId,callback:function(t){e.$set(e.form,\"voucherId\",t)},expression:\"form.voucherId\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"官方价格\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form.officialPrice,callback:function(t){e.$set(e.form,\"officialPrice\",t)},expression:\"form.officialPrice\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"优惠价格\"}},[i(\"el-input\",{model:{value:e.form.couponPrice,callback:function(t){e.$set(e.form,\"couponPrice\",t)},expression:\"form.couponPrice\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"优惠信息\"}},[i(\"el-input\",{model:{value:e.form.couponInfo,callback:function(t){e.$set(e.form,\"couponInfo\",t)},expression:\"form.couponInfo\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"活动时间\"}},[i(\"el-col\",{attrs:{span:11}},[i(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"开始时间\"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,\"startTime\",t)},expression:\"form.startTime\"}})],1),e._v(\" \"),i(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[e._v(\"-\")]),e._v(\" \"),i(\"el-col\",{attrs:{span:11}},[i(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"截止时间\"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,\"endTime\",t)},expression:\"form.endTime\"}})],1)],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){e.editVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveEdit}},[e._v(\"确 定\")])],1)],1),e._v(\" \"),i(\"el-dialog\",{attrs:{title:\"设置优惠券\",visible:e.editVisible2,width:\"30%\"},on:{\"update:visible\":function(t){e.editVisible2=t}}},[i(\"el-form\",{ref:\"form\",attrs:{model:e.form2,\"label-width\":\"70px\"}},[i(\"el-form-item\",{attrs:{label:\"商品Id\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form2.itemId,callback:function(t){e.$set(e.form2,\"itemId\",t)},expression:\"form2.itemId\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"商品名\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form2.productName,callback:function(t){e.$set(e.form2,\"productName\",t)},expression:\"form2.productName\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"官方链接\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form2.officialUrl,callback:function(t){e.$set(e.form2,\"officialUrl\",t)},expression:\"form2.officialUrl\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"图片链接\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form2.officialImageUrl,callback:function(t){e.$set(e.form2,\"officialImageUrl\",t)},expression:\"form2.officialImageUrl\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"数量\"}},[i(\"el-input\",{model:{value:e.form2.number,callback:function(t){e.$set(e.form2,\"number\",t)},expression:\"form2.number\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"应用码\"}},[i(\"el-input\",{model:{value:e.form2.voucherId,callback:function(t){e.$set(e.form2,\"voucherId\",t)},expression:\"form2.voucherId\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"官方价格\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.form2.officialPrice,callback:function(t){e.$set(e.form2,\"officialPrice\",t)},expression:\"form2.officialPrice\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"优惠价格\"}},[i(\"el-input\",{model:{value:e.form2.couponPrice,callback:function(t){e.$set(e.form2,\"couponPrice\",t)},expression:\"form2.couponPrice\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"优惠信息\"}},[i(\"el-input\",{model:{value:e.form2.couponInfo,callback:function(t){e.$set(e.form2,\"couponInfo\",t)},expression:\"form2.couponInfo\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"活动时间\"}},[i(\"el-col\",{attrs:{span:11}},[i(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"开始时间\"},model:{value:e.form2.startTime,callback:function(t){e.$set(e.form2,\"startTime\",t)},expression:\"form2.startTime\"}})],1),e._v(\" \"),i(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[e._v(\"-\")]),e._v(\" \"),i(\"el-col\",{attrs:{span:11}},[i(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"截止时间\"},model:{value:e.form2.endTime,callback:function(t){e.$set(e.form2,\"endTime\",t)},expression:\"form2.endTime\"}})],1)],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){e.editVisible2=!1}}},[e._v(\"取 消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveEdit2}},[e._v(\"确 定\")])],1)],1),e._v(\" \"),i(\"el-dialog\",{attrs:{title:\"单品信息\",visible:e.Visible,width:\"1200px\"},on:{\"update:visible\":function(t){e.Visible=t}}},[i(\"table\",{staticClass:\"table_default1\",staticStyle:{border:\"1px solid white\",width:\"1000px\"}},[i(\"tr\",[i(\"th\",[e._v(\"商品Id\")]),e._v(\" \"),i(\"th\",[e._v(\"商品介绍\")]),e._v(\" \"),i(\"th\",[e._v(\"商品价格\")]),e._v(\" \"),i(\"th\",[e._v(\"图片\")]),e._v(\" \"),i(\"th\",[e._v(\"操作\")])]),e._v(\" \"),i(\"tr\",[i(\"td\",{staticStyle:{width:\"150px\",\"text-align\":\"center\"}},[e._v(e._s(this.nid))]),e._v(\" \"),i(\"td\",{staticStyle:{width:\"500px\"}},[e._v(e._s(this.ntitle))]),e._v(\" \"),i(\"td\",{staticStyle:{width:\"150px\",\"text-align\":\"center\"}},[e._v(e._s(this.nprice))]),e._v(\" \"),i(\"td\",{staticStyle:{width:\"200px\"}},[i(\"img\",{staticStyle:{width:\"50px\",height:\"50px\",\"margin-left\":\"70px\"},attrs:{src:this.nimg}})]),e._v(\" \"),i(\"td\",[i(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(t){return e.handleEdit2()}}},[e._v(\"设置优惠券\\n                    \")]),e._v(\"`\\n                \")],1)])])])],1)}),[],!1,null,\"30f5cb72\",null);t.default=a.exports},667:function(e,t,i){var l=i(710);\"string\"==typeof l&&(l=[[e.i,l,\"\"]]),l.locals&&(e.exports=l.locals);(0,i(158).default)(\"94eca9c2\",l,!0,{})},709:function(e,t,i){\"use strict\";var l=i(667);i.n(l).a},710:function(e,t,i){}}]);","extractedComments":[]}