{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{633:function(e,t,l){\"use strict\";l.r(t);var i={name:\"AllCoupons\",data:()=>({query:{sid:\"\",pageIndex:1},nitemId:\"\",nmerchantAccount:\"\",nofficialPrice:\"\",ncouponPrice:\"\",nendTime:\"\",dialogVisible:!1,tableData:[],tableData1:[],multipleSelection:[],pageTotal:0,form:{},form2:{},idx:-1,id:-1,editVisible:!1,editVisible2:!1,Visible:!1}),created(){this.allCoupon()},methods:{onCopy(e){this.$notify({title:\"成功\",message:\"复制成功\",type:\"success\"}),this.dialogVisible=!1,console.log(e)},onError(e){this.$notify.error({title:\"错误\",message:\"复制失败\"}),this.dialogVisible=!1},handleClose(e){this.$confirm(\"确认关闭？\").then(t=>{e()}).catch(e=>{})},allCoupon(){this.$axios.post(\"/api/merchant/getallcouponinfo\",{},{headers:{contentType:\"application/json;charset=UTF-8\"}}).then(e=>{\"该商家未设置优惠券\"===e.data.msg?this.$notify.error({title:\"错误\",message:e.data.msg}):(console.log(e.data),this.tableData=e.data.msg)})},handleSearch(){this.$axios.post(\"/api/merchant/getcouponinfo\",this.$qs.stringify({itemId:this.query.sid}),{headers:{contentType:\"application/json;charset=UTF-8\"}}).then(e=>{this.Visible=!0,console.log(e.data),this.tableData1=e.data.msg,this.nitemId=this.tableData1.itemId,this.nmerchantAccount=this.tableData1.merchantAccount,this.nofficialPrice=this.tableData1.officialPrice,this.ncouponPrice=this.tableData1.couponPrice,this.nendTime=this.tableData1.endTime})},handleDelete(e,t){this.$confirm(\"确定要删除吗？\",\"提示\",{type:\"warning\"}).then(()=>{this.$message.success(\"删除成功\"),this.tableData.splice(e,1)}).catch(()=>{})},handleSelectionChange(e){this.multipleSelection=e},delAllSelection(){const e=this.multipleSelection.length;let t=\"\";this.delList=this.delList.concat(this.multipleSelection);for(let l=0;l<e;l++)t+=this.multipleSelection[l].name+\" \";console.log(this.delList);for(let e=0;e<this.delList.length;e++)this.tableData.splice(this.delList[e].$index,1);this.$message.error(`删除了${t}`),this.multipleSelection=[]},handleEdit(e){this.form=e,this.editVisible=!0},handleEdit2(){this.form2=this.tableData1,this.editVisible2=!0},saveEdit(){this.editVisible=!1,this.$message.success(\"修改成功\")},saveEdit2(){this.Visible=!1,this.$message.success(\"修改成功\")}},mounted(){}},a=(l(711),l(63)),o=Object(a.a)(i,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",[l(\"div\",{staticClass:\"crumbs\"},[l(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[l(\"el-breadcrumb-item\",[l(\"i\",{staticClass:\"el-icon-lx-cascades\"}),e._v(\" 我的优惠券\\n            \")])],1)],1),e._v(\" \"),l(\"div\",{staticClass:\"handle-box\"},[l(\"el-button\",{staticClass:\"handle-del mr10\",attrs:{type:\"primary\",icon:\"el-icon-delete\"},on:{click:e.delAllSelection}},[e._v(\"批量删除\")]),e._v(\" \"),l(\"el-button\",{staticClass:\"handle-del mr10\",attrs:{type:\"primary\",icon:\"el-icon-delete\"},on:{click:e.allCoupon}},[e._v(\"所有优惠券\")]),e._v(\" \"),l(\"el-input\",{staticClass:\"handle-input mr10\",attrs:{placeholder:\"商品Id\"},model:{value:e.query.sid,callback:function(t){e.$set(e.query,\"sid\",t)},expression:\"query.sid\"}}),e._v(\" \"),l(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")])],1),e._v(\" \"),l(\"el-table\",{ref:\"multipleTable\",staticClass:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:\"\",\"header-cell-class-name\":\"table-header\",height:\"500\"},on:{\"selection-change\":e.handleSelectionChange}},[l(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),e._v(\" \"),l(\"el-table-column\",{attrs:{label:\"商品Id\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.itemId))]}}])}),e._v(\" \"),l(\"el-table-column\",{attrs:{label:\"商家用户名\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.merchantAccount))]}}])}),e._v(\" \"),l(\"el-table-column\",{attrs:{label:\"原价\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.officialPrice))]}}])}),e._v(\" \"),l(\"el-table-column\",{attrs:{label:\"现价\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.couponPrice))]}}])}),e._v(\" \"),l(\"el-table-column\",{attrs:{label:\"截止时间\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.endTime))]}}])}),e._v(\" \"),l(\"el-table-column\",{attrs:{label:\"操作\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(l){return e.handleEdit(t.row)}}},[e._v(\"修改优惠券\")]),e._v(\" \"),l(\"el-button\",{staticClass:\"red\",attrs:{type:\"text\",icon:\"el-icon-delete\"},on:{click:function(l){return e.handleDelete(t.$index,t.row[0])}}},[e._v(\"删除\")])]}}])})],1),e._v(\" \"),l(\"el-dialog\",{attrs:{title:\"设置优惠券\",visible:e.editVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.editVisible=t}}},[l(\"el-form\",{ref:\"form\",attrs:{model:e.form,\"label-width\":\"70px\"}},[l(\"el-form-item\",{attrs:{label:\"商品Id\"}},[l(\"el-input\",{model:{value:e.form.itemId,callback:function(t){e.$set(e.form,\"itemId\",t)},expression:\"form.itemId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"官方链接\"}},[l(\"el-input\",{model:{value:e.form.officialUrl,callback:function(t){e.$set(e.form,\"officialUrl\",t)},expression:\"form.officialUrl\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"图片链接\"}},[l(\"el-input\",{model:{value:e.form.officialImageUrl,callback:function(t){e.$set(e.form,\"officialImageUrl\",t)},expression:\"form.officialImageUrl\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"数量\"}},[l(\"el-input\",{model:{value:e.form.number,callback:function(t){e.$set(e.form,\"number\",t)},expression:\"form.number\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"应用码\"}},[l(\"el-input\",{model:{value:e.form.voucherId,callback:function(t){e.$set(e.form,\"voucherId\",t)},expression:\"form.voucherId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"官方价格\"}},[l(\"el-input\",{model:{value:e.form.officialPrice,callback:function(t){e.$set(e.form,\"officialPrice\",t)},expression:\"form.officialPrice\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"优惠价格\"}},[l(\"el-input\",{model:{value:e.form.couponPrice,callback:function(t){e.$set(e.form,\"couponPrice\",t)},expression:\"form.couponPrice\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"优惠信息\"}},[l(\"el-input\",{model:{value:e.form.couponInfo,callback:function(t){e.$set(e.form,\"couponInfo\",t)},expression:\"form.couponInfo\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"活动时间\"}},[l(\"el-col\",{attrs:{span:11}},[l(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"开始时间\"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,\"startTime\",t)},expression:\"form.startTime\"}})],1),e._v(\" \"),l(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[e._v(\"-\")]),e._v(\" \"),l(\"el-col\",{attrs:{span:11}},[l(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"截止时间\"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,\"endTime\",t)},expression:\"form.endTime\"}})],1)],1)],1),e._v(\" \"),l(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{on:{click:function(t){e.editVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),l(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.handleEdit()}}},[e._v(\"修 改\")])],1)],1),e._v(\" \"),l(\"el-dialog\",{attrs:{title:\"设置优惠券\",visible:e.editVisible2,width:\"30%\"},on:{\"update:visible\":function(t){e.editVisible2=t}}},[l(\"el-form\",{ref:\"form\",attrs:{model:e.form2,\"label-width\":\"70px\"}},[l(\"el-form-item\",{attrs:{label:\"商品Id\"}},[l(\"el-input\",{model:{value:e.form2.itemId,callback:function(t){e.$set(e.form2,\"itemId\",t)},expression:\"form2.itemId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"官方链接\"}},[l(\"el-input\",{model:{value:e.form2.officialUrl,callback:function(t){e.$set(e.form2,\"officialUrl\",t)},expression:\"form2.officialUrl\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"图片链接\"}},[l(\"el-input\",{model:{value:e.form2.officialImageUrl,callback:function(t){e.$set(e.form2,\"officialImageUrl\",t)},expression:\"form2.officialImageUrl\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"数量\"}},[l(\"el-input\",{model:{value:e.form2.number,callback:function(t){e.$set(e.form2,\"number\",t)},expression:\"form2.number\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"应用码\"}},[l(\"el-input\",{model:{value:e.form2.voucherId,callback:function(t){e.$set(e.form2,\"voucherId\",t)},expression:\"form2.voucherId\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"官方价格\"}},[l(\"el-input\",{model:{value:e.form2.officialPrice,callback:function(t){e.$set(e.form2,\"officialPrice\",t)},expression:\"form2.officialPrice\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"优惠价格\"}},[l(\"el-input\",{model:{value:e.form2.couponPrice,callback:function(t){e.$set(e.form2,\"couponPrice\",t)},expression:\"form2.couponPrice\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"优惠信息\"}},[l(\"el-input\",{model:{value:e.form2.couponInfo,callback:function(t){e.$set(e.form2,\"couponInfo\",t)},expression:\"form2.couponInfo\"}})],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"活动时间\"}},[l(\"el-col\",{attrs:{span:11}},[l(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"开始时间\"},model:{value:e.form2.startTime,callback:function(t){e.$set(e.form2,\"startTime\",t)},expression:\"form2.startTime\"}})],1),e._v(\" \"),l(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[e._v(\"-\")]),e._v(\" \"),l(\"el-col\",{attrs:{span:11}},[l(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"截止时间\"},model:{value:e.form2.endTime,callback:function(t){e.$set(e.form2,\"endTime\",t)},expression:\"form2.endTime\"}})],1)],1)],1),e._v(\" \"),l(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{on:{click:function(t){e.editVisible2=!1}}},[e._v(\"取 消\")]),e._v(\" \"),l(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.editVisible2=!1}}},[e._v(\"修 改\")])],1)],1),e._v(\" \"),l(\"el-dialog\",{attrs:{title:\"优惠券信息\",visible:e.Visible,width:\"60%\"},on:{\"update:visible\":function(t){e.Visible=t}}},[l(\"table\",{staticClass:\"table_default1\",staticStyle:{border:\"1px solid white\",width:\"1000px\"}},[l(\"tr\",[l(\"th\",[e._v(\"商品Id\")]),e._v(\" \"),l(\"th\",[e._v(\"商家名称\")]),e._v(\" \"),l(\"th\",[e._v(\"原价\")]),e._v(\" \"),l(\"th\",[e._v(\"现价\")]),e._v(\" \"),l(\"th\",[e._v(\"截止时间\")]),e._v(\" \"),l(\"th\",[e._v(\"操作\")])]),e._v(\" \"),l(\"tr\",[l(\"td\",{staticStyle:{width:\"150px\",\"text-align\":\"center\"}},[e._v(e._s(this.nitemId))]),e._v(\" \"),l(\"td\",{staticStyle:{width:\"500px\",\"text-align\":\"center\"}},[e._v(e._s(this.nmerchantAccount))]),e._v(\" \"),l(\"td\",{staticStyle:{width:\"150px\",\"text-align\":\"center\"}},[e._v(e._s(this.nofficialPrice))]),e._v(\" \"),l(\"td\",{staticStyle:{width:\"150px\",\"text-align\":\"center\"}},[e._v(e._s(this.ncouponPrice))]),e._v(\" \"),l(\"td\",{staticStyle:{width:\"150px\",\"text-align\":\"center\"}},[e._v(e._s(this.nendTime))]),e._v(\" \"),l(\"td\",[l(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.handleEdit2()}}},[e._v(\"修 改\")]),e._v(\" \"),l(\"el-button\",{on:{click:function(t){e.Visible=!1}}},[e._v(\"取 消\")])],1)])])])],1)}),[],!1,null,\"a72ed384\",null);t.default=o.exports},667:function(e,t,l){var i=l(712);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);(0,l(158).default)(\"319c2e16\",i,!0,{})},711:function(e,t,l){\"use strict\";var i=l(667);l.n(i).a},712:function(e,t,l){}}]);","extractedComments":[]}