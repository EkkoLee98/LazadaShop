{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{765:function(e,t,a){\"use strict\";a.r(t);var l={name:\"GetAllCoupons\",data:()=>({query:{sid:\"\",pageIndex:1},dialogVisible:!1,tableData:[],multipleSelection:[],pageTotal:0,form:{},idx:-1,id:-1,shareurl:\"\"}),created(){this.GetallCoupon()},methods:{onCopy(e){this.$notify({title:\"成功\",message:\"复制成功\",type:\"success\"}),this.dialogVisible=!1,console.log(e)},onError(e){this.$notify.error({title:\"错误\",message:\"复制失败\"}),this.dialogVisible=!1},GetallCoupon(){this.$axios.post(\"/api/share/getallcoupon\",{},{headers:{contentType:\"application/json;charset=UTF-8\"}}).then(e=>{console.log(e.data),this.tableData=e.data.msg})},handleSearch(){},getUrl(e){this.$axios.post(\"/api/share/generationShareUrl\",this.$qs.stringify({itemId:e.itemId}),{headers:{contentType:\"application/json;charset=UTF-8\"}}).then(t=>{console.log(t.data),200==t.data.code?(this.dialogVisible=!0,this.shareurl=\"http://siushare.com/coupon/share?shareId=\"+t.data.msg+\"&itemId=\"+e.itemId):33==t.data.code&&this.$notify({title:\"成功\",message:\"已生成过相同的URL！\",type:\"success\"})})},handleSelectionChange(e){this.multipleSelection=e},saveEdit(){this.editVisible=!1,this.$message.success(`修改第 ${this.idx+1} 行成功`),this.$set(this.tableData,this.idx,this.form)}},mounted(){}},s=(a(847),a(72)),i=Object(s.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-cascades\"}),e._v(\" 所有优惠券\\n              \")])],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"container\"},[a(\"div\",{staticClass:\"handle-box\"},[a(\"el-button\",{staticClass:\"handle-del mr10\",attrs:{type:\"primary\",icon:\"el-icon-delete\"},on:{click:e.GetallCoupon}},[e._v(\"所有优惠券\\n              \")]),e._v(\" \"),a(\"el-input\",{staticClass:\"handle-input mr10\",attrs:{placeholder:\"商品Id\"},model:{value:e.query.sid,callback:function(t){e.$set(e.query,\"sid\",t)},expression:\"query.sid\"}}),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")])],1),e._v(\" \"),a(\"el-table\",{ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:\"\",cla744ss:\"table\",\"header-cell-class-name\":\"table-header\",height:\"500\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"商品Id\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.itemId))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"商家名称\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.merchantAccount))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"原价\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.officialPrice))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"现价\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.couponPrice))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"截止时间\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(e._s(t.row.endTime))]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(a){return e.getUrl(t.row)}}},[e._v(\"生成Url\\n                      \")])]}}])})],1)],1),e._v(\" \"),a(\"el-dialog\",{attrs:{title:\"生成URL成功\",visible:e.dialogVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[e._v(\"\\n          生成URL成功：\"),a(\"span\",[e._v(\"您生成的URL为:  \"+e._s(e.shareurl)+\"  快去跟大家分享吧！\")]),e._v(\" \"),a(\"el-button\",{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:e.shareurl,expression:\"shareurl\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:e.onCopy,expression:\"onCopy\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:e.onError,expression:\"onError\",arg:\"error\"}],staticClass:\"ml10\",attrs:{type:\"text\",size:\"medium\"}},[e._v(\"点击复制\\n          \")]),e._v(\" \"),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"确 定\")])],1)],1)],1)}),[],!1,null,\"77375545\",null);t.default=i.exports},799:function(e,t,a){var l=a(848);\"string\"==typeof l&&(l=[[e.i,l,\"\"]]),l.locals&&(e.exports=l.locals);(0,a(138).default)(\"04d1ec3a\",l,!0,{})},847:function(e,t,a){\"use strict\";var l=a(799);a.n(l).a},848:function(e,t,a){}}]);","extractedComments":[]}